<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      i18n:domain="urban">

<body>
<div metal:define-macro="body">

<metal:base_body use-macro="base_macros/body">

<metal:widgets fill-slot="widgets"
           tal:define="global body_onload string: init();
                       member context/@@plone_portal_state/member; 
                       border python: test(member.has_role('Manager'), 'enable_border', 'disable_border');
                       dummy python:request.set(border, 1);
                       useTabbing python: context.portal_urban.getUseTabbing();
                       putils context/plone_utils">

        <div tal:condition="not: useTabbing">
              <tal:fieldsets repeat="fieldset python: ['urban_description', 'urban_road', 'urban_location', 'urban_investigation_and_advices', 'urban_peb']">
                <fieldset>
                  <legend tal:content="python: view.getTranslatedSchemaLabel(fieldset)"
                          i18n:translate="" />
                  <tal:fields repeat="field python:schematas[fieldset].editableFields(here, visible_only=True)">
                   <metal:fieldMacro use-macro="python:here.widget(field.getName(), mode='edit')" />
                  </tal:fields>
                </fieldset>
              </tal:fieldsets>
        </div>

        <tal:with_tabbing condition="useTabbing">
              <tal:fieldsets repeat="fieldset python: ['urban_description', 'urban_road', 'urban_location', 'urban_investigation_and_advices', 'urban_peb']">
                <fieldset class="urbanEditWithTabbing" tal:define="fieldsetid python:putils.normalizeString(fieldset)"
                        tal:attributes="id string:fieldset-${fieldsetid}">
                  <legend id="#"
                          tal:content="python: view.getTranslatedSchemaLabel(fieldset)"
                          tal:attributes="id string:fieldsetlegend-${fieldsetid}"
                          i18n:translate="" />
                  <tal:fields repeat="field python:schematas[fieldset].editableFields(here, visible_only=True)">
                   <metal:fieldMacro use-macro="python:here.widget(field.getName(), mode='edit')" />
                  </tal:fields>
                </fieldset>
              </tal:fieldsets>
            </tal:with_tabbing>
</metal:widgets>
</metal:base_body>
</div>

</body>
</html>
