<div metal:define-macro="urbanMapCSS" tal:define="staticPylonsHost context/portal_urban/getStaticPylonsHost">
   <link rel="stylesheet" type="text/css" tal:attributes="href python:'%s/lib/ext/Ext/resources/css/ext-all.css'%staticPylonsHost"/>
   <link rel="stylesheet" type="text/css" tal:attributes="href python:'%s/lib/ext/Ext/resources/css/xtheme-gray.css'%staticPylonsHost"/>
   <link rel="stylesheet" type="text/css" tal:attributes="href python:'%s/lib/openlayers/theme/default/style.css'%staticPylonsHost"/>
   <link rel="stylesheet" type="text/css" tal:attributes="href python:'%s/lib/ext/Ext/ux/grid.RowActions.css'%staticPylonsHost"/>
   <link rel="stylesheet" type="text/css" tal:attributes="href python:'%s/app/css/main.css'%staticPylonsHost"/>
</div>

<div metal:define-macro="urbanMapScriptBase" tal:define="pylonsHost context/portal_urban/getPylonsHost;
														 staticPylonsHost context/portal_urban/getStaticPylonsHost">
    <script type="text/javascript" tal:attributes="src python:'%s/lib/ext/Ext/adapter/ext/ext-base.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/lib/ext/Ext/ext-all.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/lib/openlayers/SingleFile.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/lib/geoext/script/GeoExt.js'%staticPylonsHost"></script>

        <!-- The script below will load the configuration of the application -->
    <script type="text/javascript" tal:attributes="src string:${pylonsHost}/config/index"></script>
    <!-- The script below will load the capabilities of the print service
         and save them into the global printCapabilities variable. Instead
         of this, the PrintProvider can be configured with a url and take
         care of fetching the capabilities. -->
    <script type="text/javascript" tal:attributes="src string:${pylonsHost}/print/info.json?var=printCapabilities"></script>

    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/ClickControl.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/lib/ext/Ext/ux/grid.RowActions.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/lib/ext/Ext/ux/grid.RowExpander.js'%staticPylonsHost"></script>

    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/UrbanMap.PrintForm.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/UrbanMap.ParcelleGrid.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/UrbanMap.SearchForm.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/UrbanMap.SearchForm.Proprietaire.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/UrbanMap.SearchForm.Parcelle.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/UrbanMap.ParamForm.js'%staticPylonsHost"></script>

    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/GEOB_util.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/GEOB_waiter.js'%staticPylonsHost"></script>    
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/GEOB_ows.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/GEOB_managelayers.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/GEOB_FeatureDataModel.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/GEOB_resultspanel.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/GEOB_getfeatureinfo.js'%staticPylonsHost"></script>

    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/UrbanMap.MapPanel.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/UrbanMap.WMSLegend.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/UrbanMap.TreePanel.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/UrbanMap.WMSCapabilitiesWindow.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/UrbanMap.WMCReader.js'%staticPylonsHost"></script>
</div>

<div metal:define-macro="urbanMapScript" tal:define="staticPylonsHost context/portal_urban/getStaticPylonsHost">
	<script tal:content="string:var NISNum='${context/portal_urban/getNISNum}';var urbanProrietariesCapakeyArray=${view/getListProprietariesCapaKey};var urbanCapakeyArray=${view/getListCapaKey};var proxyUrl='${context/portal_url}/portal_urban/getProxy?url=';var urbanMapWMCUrl='${context/absolute_url}/wmc';">
	</script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/urban-layout.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/urban-map.js'%staticPylonsHost"></script>
</div>

<div metal:define-macro="urbanFullMapScript" tal:define="staticPylonsHost context/portal_urban/getStaticPylonsHost">
	<script tal:content="string:var NISNum='${context/portal_urban/getNISNum}';var urbanCapakeyArray=${view/getListCapaKey};var proxyUrl='${context/portal_url}/portal_urban/getProxy?url=';var urbanMapWMCUrl='${context/absolute_url}/wmc';">
	</script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/main-layout.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/main-map.js'%staticPylonsHost"></script>
    <script type="text/javascript" tal:attributes="src python:'%s/app/lib/App/UrbanMap.LayerStore.js'%staticPylonsHost"></script>
</div>
